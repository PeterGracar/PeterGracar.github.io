<!DOCTYPE html><html lang="en-GB">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Extra reading (non-examinable) ‣ Lecture notes: Discrete Time Finance (MATH5320M)</title>
<!--Generated on Tue Dec  3 15:06:01 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<!--Document created on December 3, 2024.-->
<style>:root { --bml-ltx-font-size: 10.95; }</style>
<link rel="stylesheet" href="LaTeXML.css" type="text/css">
<link rel="stylesheet" href="ltx-article.css" type="text/css">
<link rel="stylesheet" href="ltx-amsart.css" type="text/css">
<link rel="stylesheet" href="bookml/gitbook/css/style.css" type="text/css">
<link rel="stylesheet" href="bookml/gitbook/css/plugin-table.css" type="text/css">
<link rel="stylesheet" href="bookml/gitbook/css/plugin-search.css" type="text/css">
<link rel="stylesheet" href="bookml/gitbook/css/plugin-bookdown.css" type="text/css">
<link rel="stylesheet" href="bookml/gitbook/css/plugin-fontsettings.css" type="text/css">
<link rel="stylesheet" href="bookml/CSS/style.css" type="text/css">
<link rel="stylesheet" href="bookml/CSS/style.gitbook,plain.css" type="text/css">
<link rel="stylesheet" href="bookml/CSS/style.gitbook.css" type="text/css">
<link rel="stylesheet" href="bmluser/colors.gitbook-DiscreteTimeFinance.css" type="text/css">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6"></script>
<link rel="up" href="index.html" title="Lecture notes: Discrete Time Finance (MATH5320M)">
<link rel="start" href="index.html" title="Lecture notes: Discrete Time Finance (MATH5320M)">
<link rel="prev" href="Pt10.html" title="Lecture X 03/12/2024 ‣ Lecture notes: Discrete Time Finance (MATH5320M)">
<link rel="next" href="Ptx2.html" title="Literature list ‣ Lecture notes: Discrete Time Finance (MATH5320M)">
<link rel="part" href="Pt1.html" title="Lecture I 01/10/2024 ‣ Lecture notes: Discrete Time Finance (MATH5320M)">
<link rel="part" href="Pt2.html" title="Lecture II 08/10/2024 ‣ Lecture notes: Discrete Time Finance (MATH5320M)">
<link rel="part" href="Pt3.html" title="Lecture III 15/10/2024 ‣ Lecture notes: Discrete Time Finance (MATH5320M)">
<link rel="part" href="Pt4.html" title="Lecture IV 22/10/2024 ‣ Lecture notes: Discrete Time Finance (MATH5320M)">
<link rel="part" href="Pt5.html" title="Lecture V 29/10/2024 ‣ Lecture notes: Discrete Time Finance (MATH5320M)">
<link rel="part" href="Pt6.html" title="Lecture VI 05/11/2024 ‣ Lecture notes: Discrete Time Finance (MATH5320M)">
<link rel="part" href="Pt7.html" title="Lecture VII 12/11/2024 ‣ Lecture notes: Discrete Time Finance (MATH5320M)">
<link rel="part" href="Pt8.html" title="Lecture VIII 19/11/2024 ‣ Lecture notes: Discrete Time Finance (MATH5320M)">
<link rel="part" href="Pt9.html" title="Lecture IX 26/11/2024 ‣ Lecture notes: Discrete Time Finance (MATH5320M)">
<link rel="part" href="Pt10.html" title="Lecture X 03/12/2024 ‣ Lecture notes: Discrete Time Finance (MATH5320M)">
<link rel="part" href="Ptx2.html" title="Literature list ‣ Lecture notes: Discrete Time Finance (MATH5320M)">
</head>
<body>
<div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">
<a href="#bml-main-content" tabindex="0" class="bml-skip-to-content">Skip to content.</a>
<div class="book-summary"><nav class="ltx_page_navbar">
<ul class="ltx_toclist summary">
<li>
<a href="index.html" title="" class="ltx_ref" rel="start">Lecture notes: Discrete Time Finance (MATH5320M)</a>
</li>
<li class="divider">
<li data-level="I" data-path="Pt1.html" class="ltx_tocentry ltx_tocentry_part  chapter "><a href="Pt1.html" title="In Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><b><span class="ltx_tag ltx_tag_ref">I </span></b>01/10/2024</a></li>
<li data-level="II" data-path="Pt2.html" class="ltx_tocentry ltx_tocentry_part  chapter "><a href="Pt2.html" title="In Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><b><span class="ltx_tag ltx_tag_ref">II </span></b>08/10/2024</a></li>
<li data-level="III" data-path="Pt3.html" class="ltx_tocentry ltx_tocentry_part  chapter "><a href="Pt3.html" title="In Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><b><span class="ltx_tag ltx_tag_ref">III </span></b>15/10/2024</a></li>
<li data-level="IV" data-path="Pt4.html" class="ltx_tocentry ltx_tocentry_part  chapter "><a href="Pt4.html" title="In Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><b><span class="ltx_tag ltx_tag_ref">IV </span></b>22/10/2024</a></li>
<li data-level="V" data-path="Pt5.html" class="ltx_tocentry ltx_tocentry_part  chapter "><a href="Pt5.html" title="In Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><b><span class="ltx_tag ltx_tag_ref">V </span></b>29/10/2024</a></li>
<li data-level="VI" data-path="Pt6.html" class="ltx_tocentry ltx_tocentry_part  chapter "><a href="Pt6.html" title="In Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><b><span class="ltx_tag ltx_tag_ref">VI </span></b>05/11/2024</a></li>
<li data-level="VII" data-path="Pt7.html" class="ltx_tocentry ltx_tocentry_part  chapter "><a href="Pt7.html" title="In Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><b><span class="ltx_tag ltx_tag_ref">VII </span></b>12/11/2024</a></li>
<li data-level="VIII" data-path="Pt8.html" class="ltx_tocentry ltx_tocentry_part  chapter "><a href="Pt8.html" title="In Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><b><span class="ltx_tag ltx_tag_ref">VIII </span></b>19/11/2024</a></li>
<li data-level="IX" data-path="Pt9.html" class="ltx_tocentry ltx_tocentry_part  chapter "><a href="Pt9.html" title="In Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><b><span class="ltx_tag ltx_tag_ref">IX </span></b>26/11/2024</a></li>
<li data-level="X" data-path="Pt10.html" class="ltx_tocentry ltx_tocentry_part  chapter "><a href="Pt10.html" title="In Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><b><span class="ltx_tag ltx_tag_ref">X </span></b>03/12/2024</a></li>
<li data-level="" data-path="" class="ltx_tocentry ltx_tocentry_part ltx_ref_self  chapter active">
<a href="" title="In Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref">Extra reading (non-examinable)</a>
<ol class="ltx_toclist ltx_toclist_part">
<li data-level="4" data-path="" class="ltx_tocentry ltx_tocentry_section  chapter ">
<a href="#S4" title="In Extra reading (non-examinable) ‣ Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><b><span class="ltx_tag ltx_tag_ref">4 </span></b>Investment in Multi-Period Market Models</a>
<ol class="ltx_toclist ltx_toclist_section">
<li data-level="4.1" data-path="" class="ltx_tocentry ltx_tocentry_subsection  chapter "><a href="#S4.SS1" title="In 4. Investment in Multi-Period Market Models ‣ Extra reading (non-examinable) ‣ Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><b><span class="ltx_tag ltx_tag_ref">4.1 </span></b>Optimal Portfolios in a Multi-Period Market Model</a></li>
</ol>
</li>
</ol>
</li>
<li data-level="" data-path="Ptx2.html" class="ltx_tocentry ltx_tocentry_part  chapter "><a href="Ptx2.html" title="In Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref">Literature list</a></li>
</ul>
</nav></div>
<div class="ltx_page_main book-body fixed">
<div class="body-inner">
<div class="book-header fixed" role="navigation"><h1>Extra reading (non-examinable)</h1></div>
<div class="page-wrapper" tabindex="-1" role="main">
<div class="ltx_page_content page-inner" id="bml-main-content">
<section class="ltx_part normal" lang="en-GB">
<div class="section level1">

<h1 class="ltx_title ltx_title_part">Extra reading (non-examinable)</h1>

<section id="S4" class="ltx_section normal">
<div class="section level2">

<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section header-section-number">4</span>. Investment in Multi-Period Market Models</h2>

<section id="S4.SS1" class="ltx_subsection normal">
<div class="section level3">

<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection header-section-number">4.1</span>. Optimal Portfolios in a Multi-Period Market Model</h3>

<div id="S4.SS1.p1" class="ltx_para">
<p class="ltx_p">In this section we consider the problem of utility maximization as
in Section <a href="Pt7.html#S3.SS1" title="3.1. Single Period Investment ‣ 3. Investment ‣ Lecture VII 12/11/2024 ‣ Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.1</span></a>, but this time the underlying model is a
multi period model. We shall see that the ideas and methods to solve
this problem resemble those from Section <a href="Pt7.html#S3.SS1" title="3.1. Single Period Investment ‣ 3. Investment ‣ Lecture VII 12/11/2024 ‣ Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.1</span></a> to a great
extent. We will however face difficulties imposed by the dynamic
character of multi period investment. Let us first recall the
problem: find a trading strategy that performs optimal under a
performance measure which is built up by taking expected utility of
terminal wealth. More mathematically:</p>
</div>
<div id="S4.SS1.Thmtheorem1" class="ltx_theorem ltx_theorem_definition">

<h6 class="ltx_title ltx_runin ltx_title_theorem">
<span class="ltx_tag ltx_tag_theorem header-section-number"><span class="ltx_text ltx_font_bold">Definition 4.1.1</span></span><span class="ltx_text ltx_font_bold">.</span>
</h6>
<div id="S4.SS1.Thmtheorem1.p1" class="ltx_para">
<p class="ltx_p">A trading strategy <math id="S4.SS1.Thmtheorem1.p1.m1" class="ltx_Math" alttext="\phi^{*}=(\phi^{*}_{t})_{0\leq t\leq T}\in\mathcal{T}" display="inline"><semantics><mrow><msup><mi>ϕ</mi><mo>∗</mo></msup><mo>=</mo><msub><mrow><mo stretchy="false">(</mo><msubsup><mi>ϕ</mi><mi>t</mi><mo>∗</mo></msubsup><mo stretchy="false">)</mo></mrow><mrow><mn>0</mn><mo>≤</mo><mi>t</mi><mo>≤</mo><mi>T</mi></mrow></msub><mo>∈</mo><mi class="ltx_font_mathcaligraphic">𝒯</mi></mrow><annotation encoding="application/x-tex">\phi^{*}=(\phi^{*}_{t})_{0\leq t\leq T}\in\mathcal{T}</annotation></semantics></math> in a multi period market model with time
horizon <math id="S4.SS1.Thmtheorem1.p1.m2" class="ltx_Math" alttext="[0,T]" display="inline"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo>,</mo><mi>T</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0,T]</annotation></semantics></math> is called a <span class="ltx_text ltx_font_bold">solution for the optimal
portfolio problem</span> with initial investment <math id="S4.SS1.Thmtheorem1.p1.m3" class="ltx_Math" alttext="x" display="inline"><semantics><mi>x</mi><annotation encoding="application/x-tex">x</annotation></semantics></math> and utility function
<math id="S4.SS1.Thmtheorem1.p1.m4" class="ltx_Math" alttext="u" display="inline"><semantics><mi>u</mi><annotation encoding="application/x-tex">u</annotation></semantics></math> if</p>
<ol id="S4.I1" class="ltx_enumerate">
<li id="S4.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">(1)</span><div id="S4.I1.i1.p1" class="ltx_para">​<p class="ltx_p"><math id="S4.I1.i1.p1.m1" class="ltx_Math" alttext="V_{0}(\phi^{*})=x" display="inline"><semantics><mrow><mrow><msub><mi>V</mi><mn>0</mn></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msup><mi>ϕ</mi><mo>∗</mo></msup><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">V_{0}(\phi^{*})=x</annotation></semantics></math>.</p>
</div>
</li>
<li id="S4.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">(2)</span><div id="S4.I1.i2.p1" class="ltx_para">​<p class="ltx_p"><math id="S4.I1.i2.p1.m1" class="ltx_math_unparsed" alttext="\displaystyle\mathbb{E}(u(V_{T}(\phi^{*}))=\max\big{\{}\mathbb{E}(u(V_{T}(\phi%
)):\phi\in\mathcal{T}\text{ and }V_{0}(\phi)=x\big{\}}." display="inline"><semantics><mrow><mi>𝔼</mi><mrow><mo stretchy="false">(</mo><mi>u</mi><mrow><mo stretchy="false">(</mo><msub><mi>V</mi><mi>T</mi></msub><mrow><mo stretchy="false">(</mo><msup><mi>ϕ</mi><mo>∗</mo></msup><mo stretchy="false">)</mo></mrow><mo stretchy="false">)</mo></mrow><mo>=</mo><mi>max</mi><mrow><mo maxsize="120%" minsize="120%">{</mo><mi>𝔼</mi><mrow><mo stretchy="false">(</mo><mi>u</mi><mrow><mo stretchy="false">(</mo><msub><mi>V</mi><mi>T</mi></msub><mrow><mo stretchy="false">(</mo><mi>ϕ</mi><mo stretchy="false">)</mo></mrow><mo rspace="0.278em" stretchy="false">)</mo></mrow><mo rspace="0.278em">:</mo><mi>ϕ</mi><mo>∈</mo><mi class="ltx_font_mathcaligraphic">𝒯</mi><mtext> and </mtext><msub><mi>V</mi><mn>0</mn></msub><mrow><mo stretchy="false">(</mo><mi>ϕ</mi><mo stretchy="false">)</mo></mrow><mo>=</mo><mi>x</mi><mo maxsize="120%" minsize="120%">}</mo></mrow><mo lspace="0em">.</mo></mrow></mrow></mrow><annotation encoding="application/x-tex">\displaystyle\mathbb{E}(u(V_{T}(\phi^{*}))=\max\big{\{}\mathbb{E}(u(V_{T}(\phi%
)):\phi\in\mathcal{T}\text{ and }V_{0}(\phi)=x\big{\}}.</annotation></semantics></math></p>
</div>
</li>
</ol>
</div>
</div>
<div id="S4.SS1.p2" class="ltx_para">
<p class="ltx_p">As in the single period market models, it is not clear whether a
solution for the optimal portfolio problem in a specific model
exists. However, the existence of a solution implies that the market
is arbitrage free and a specific risk neutral measure can be
obtained similar to Proposition <a href="Pt7.html#S3.SS1.Thmtheorem4" title="Proposition 3.1.4. ‣ 3.1. Single Period Investment ‣ 3. Investment ‣ Lecture VII 12/11/2024 ‣ Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.1.4</span></a>.</p>
</div>
<div id="S4.SS1.p3" class="ltx_para">
<p class="ltx_p">The computation of a solution of an optimal portfolio problem can be
performed by generalization of each of two techniques considered in
Section <a href="Pt7.html#S3.SS1" title="3.1. Single Period Investment ‣ 3. Investment ‣ Lecture VII 12/11/2024 ‣ Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.1</span></a>. Firstly, we can write</p>
<div class="bml-overflow-wrapper">
<table id="S4.EGx49" class="ltx_equationgroup ltx_eqn_eqnarray ltx_eqn_table">

<tbody id="S4.SS1.Ex1"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><span class="ltx_text ltx_markedasmath">maximise</span></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S4.SS1.Ex1.m2" class="ltx_math_unparsed" alttext="\displaystyle\mathbb{E}(u(V_{T}(\phi))" display="inline"><semantics><mrow><mi>𝔼</mi><mrow><mo stretchy="false">(</mo><mi>u</mi><mrow><mo stretchy="false">(</mo><msub><mi>V</mi><mi>T</mi></msub><mrow><mo stretchy="false">(</mo><mi>ϕ</mi><mo stretchy="false">)</mo></mrow><mo stretchy="false">)</mo></mrow></mrow></mrow><annotation encoding="application/x-tex">\displaystyle\mathbb{E}(u(V_{T}(\phi))</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
<tbody id="S4.SS1.Ex3">
<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><span class="ltx_text ltx_markedasmath">subject to</span></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S4.SS1.Ex2.m2" class="ltx_Math" alttext="\displaystyle V_{0}(\phi)=x" display="inline"><semantics><mrow><mrow><msub><mi>V</mi><mn>0</mn></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>ϕ</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">\displaystyle V_{0}(\phi)=x</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
<tr class="ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S4.SS1.Ex3.m1" class="ltx_Math" alttext="\displaystyle\phi\in\mathcal{T}" display="inline"><semantics><mrow><mi>ϕ</mi><mo>∈</mo><mi class="ltx_font_mathcaligraphic">𝒯</mi></mrow><annotation encoding="application/x-tex">\displaystyle\phi\in\mathcal{T}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</tbody>
</table>
</div>
<p class="ltx_p">Recall that <math id="S4.SS1.p3.m1" class="ltx_Math" alttext="\mathcal{T}" display="inline"><semantics><mi class="ltx_font_mathcaligraphic">𝒯</mi><annotation encoding="application/x-tex">\mathcal{T}</annotation></semantics></math> consists of all trading strategies that
are self-financing and adapted. This constraint can be represented
as a system of linear equalities, as well as the constraint
<math id="S4.SS1.p3.m2" class="ltx_Math" alttext="V_{0}(\phi)=x" display="inline"><semantics><mrow><mrow><msub><mi>V</mi><mn>0</mn></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>ϕ</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">V_{0}(\phi)=x</annotation></semantics></math>. Therefore, we can apply standard techniques from
multidimensional calculus. This proved to be computationally
difficult in the single period framework. Here, due to a great
number of constraints, it is even less practical. Apparently, the
two-step approach works far better:</p>
<ul id="S4.I2" class="ltx_itemize">
<li id="S4.I2.ix1" class="ltx_item" style="list-style-type:none;"><div id="S4.I2.ix1.p1" class="ltx_para">​<p class="ltx_p">Step 1: Compute the maximiser <math id="S4.I2.ix1.p1.m1" class="ltx_Math" alttext="V_{T}" display="inline"><semantics><msub><mi>V</mi><mi>T</mi></msub><annotation encoding="application/x-tex">V_{T}</annotation></semantics></math> of the function <math id="S4.I2.ix1.p1.m2" class="ltx_Math" alttext="V\mapsto\mathbb{E}u(V)" display="inline"><semantics><mrow><mi>V</mi><mo stretchy="false">↦</mo><mrow><mi>𝔼</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>V</mi><mo stretchy="false">)</mo></mrow></mrow></mrow><annotation encoding="application/x-tex">V\mapsto\mathbb{E}u(V)</annotation></semantics></math> defined for certain feasible random variables <math id="S4.I2.ix1.p1.m3" class="ltx_Math" alttext="V" display="inline"><semantics><mi>V</mi><annotation encoding="application/x-tex">V</annotation></semantics></math></p>
</div></li>
<li id="S4.I2.ix2" class="ltx_item" style="list-style-type:none;"><div id="S4.I2.ix2.p1" class="ltx_para">​<p class="ltx_p">Step 2: Compute a trading strategy <math id="S4.I2.ix2.p1.m1" class="ltx_Math" alttext="\phi\in\mathcal{T}" display="inline"><semantics><mrow><mi>ϕ</mi><mo>∈</mo><mi class="ltx_font_mathcaligraphic">𝒯</mi></mrow><annotation encoding="application/x-tex">\phi\in\mathcal{T}</annotation></semantics></math> which has the maximiser <math id="S4.I2.ix2.p1.m2" class="ltx_Math" alttext="V_{T}" display="inline"><semantics><msub><mi>V</mi><mi>T</mi></msub><annotation encoding="application/x-tex">V_{T}</annotation></semantics></math> computed in step 1 as value at time <math id="S4.I2.ix2.p1.m3" class="ltx_Math" alttext="T" display="inline"><semantics><mi>T</mi><annotation encoding="application/x-tex">T</annotation></semantics></math>, i.e. <math id="S4.I2.ix2.p1.m4" class="ltx_Math" alttext="V_{T}(\phi)=V_{T}" display="inline"><semantics><mrow><mrow><msub><mi>V</mi><mi>T</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>ϕ</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><msub><mi>V</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">V_{T}(\phi)=V_{T}</annotation></semantics></math>.</p>
</div></li>
</ul>
<p class="ltx_p">Step 2 is again a replication problem, which we can solved by
methods developed in Example <a href="Pt5.html#S2.SS2.Thmtheorem3" title="Example 2.2.3. ‣ 2.2. Properties of the general multi period market model ‣ Lecture V 29/10/2024 ‣ Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.2.3</span></a>. Regarding the first
step, by virtue of Proposition <a href="Pt6.html#S2.SS4.Thmtheorem3" title="Proposition 2.4.3. ‣ 2.4. Risk neutral probability measures: arbitrage and pricing ‣ Lecture VI 05/11/2024 ‣ Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.4.3</span></a> for every self
financing and adapted trading strategy <math id="S4.SS1.p3.m3" class="ltx_Math" alttext="\phi=(\phi_{t})_{0\leq t\leq T}" display="inline"><semantics><mrow><mi>ϕ</mi><mo>=</mo><msub><mrow><mo stretchy="false">(</mo><msub><mi>ϕ</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><mrow><mn>0</mn><mo>≤</mo><mi>t</mi><mo>≤</mo><mi>T</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\phi=(\phi_{t})_{0\leq t\leq T}</annotation></semantics></math> and for every risk neutral measure <math id="S4.SS1.p3.m4" class="ltx_Math" alttext="\mathbb{Q}" display="inline"><semantics><mi>ℚ</mi><annotation encoding="application/x-tex">\mathbb{Q}</annotation></semantics></math> we have</p>
<div id="S4.SS1.Ex4" class="ltx_equation ltx_eqn_div">
<span><math id="S4.SS1.Ex4.m1" class="ltx_Math" alttext="V_{0}(\phi)=\hat{V}_{0}(\phi)=\mathbb{E}_{\mathbb{Q}}(\hat{V}_{T}(\phi))." display="block"><semantics><mrow><mrow><mrow><msub><mi>V</mi><mn>0</mn></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>ϕ</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mrow><msub><mover accent="true"><mi>V</mi><mo>^</mo></mover><mn>0</mn></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>ϕ</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mrow><msub><mi>𝔼</mi><mi>ℚ</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><msub><mover accent="true"><mi>V</mi><mo>^</mo></mover><mi>T</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>ϕ</mi><mo stretchy="false">)</mo></mrow></mrow><mo stretchy="false">)</mo></mrow></mrow></mrow><mo lspace="0em">.</mo></mrow><annotation encoding="application/x-tex">V_{0}(\phi)=\hat{V}_{0}(\phi)=\mathbb{E}_{\mathbb{Q}}(\hat{V}_{T}(\phi)).</annotation></semantics></math></span>
</div>
<p class="ltx_p">Assume that the multi period market model we are considering is
complete. In this case there is only one risk neutral measure and
the feasible set consists of all random variables <math id="S4.SS1.p3.m5" class="ltx_Math" alttext="W" display="inline"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math> such that
<math id="S4.SS1.p3.m6" class="ltx_Math" alttext="\mathbb{E}_{\mathcal{Q}}\frac{W}{B_{T}}=x" display="inline"><semantics><mrow><mrow><msub><mi>𝔼</mi><mi class="ltx_font_mathcaligraphic">𝒬</mi></msub><mo>⁢</mo><mfrac><mi>W</mi><msub><mi>B</mi><mi>T</mi></msub></mfrac></mrow><mo>=</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">\mathbb{E}_{\mathcal{Q}}\frac{W}{B_{T}}=x</annotation></semantics></math>. Indeed, if <math id="S4.SS1.p3.m7" class="ltx_Math" alttext="W" display="inline"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math> is in this set
then there exists a trading strategy with the initial investment <math id="S4.SS1.p3.m8" class="ltx_Math" alttext="x" display="inline"><semantics><mi>x</mi><annotation encoding="application/x-tex">x</annotation></semantics></math>
that replicates <math id="S4.SS1.p3.m9" class="ltx_Math" alttext="W" display="inline"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math> (Step 2 can be carried out). Therefore, first
step in our optimal portfolio problem is to solve</p>
<div class="bml-overflow-wrapper">
<table id="S4.EGx50" class="ltx_equationgroup ltx_eqn_eqnarray ltx_eqn_table">

<tbody id="S4.SS1.Ex5"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><span class="ltx_text ltx_markedasmath">maximise</span></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S4.SS1.Ex5.m2" class="ltx_Math" alttext="\displaystyle\mathbb{E}(u(W))" display="inline"><semantics><mrow><mi>𝔼</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mi>u</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>W</mi><mo stretchy="false">)</mo></mrow></mrow><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">\displaystyle\mathbb{E}(u(W))</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
<tbody id="S4.SS1.Ex6"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><span class="ltx_text ltx_markedasmath">subject to</span></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S4.SS1.Ex6.m2" class="ltx_Math" alttext="\displaystyle\mathbb{E}_{\mathbb{Q}}\left(\frac{1}{B_{T}}W\right)=x." display="inline"><semantics><mrow><mrow><mrow><msub><mi>𝔼</mi><mi>ℚ</mi></msub><mo>⁢</mo><mrow><mo>(</mo><mrow><mstyle displaystyle="true"><mfrac><mn>1</mn><msub><mi>B</mi><mi>T</mi></msub></mfrac></mstyle><mo>⁢</mo><mi>W</mi></mrow><mo>)</mo></mrow></mrow><mo>=</mo><mi>x</mi></mrow><mo lspace="0em">.</mo></mrow><annotation encoding="application/x-tex">\displaystyle\mathbb{E}_{\mathbb{Q}}\left(\frac{1}{B_{T}}W\right)=x.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<p class="ltx_p">If the market is not complete then in precisely the same way as in
Section <a href="Pt7.html#S3.SS1" title="3.1. Single Period Investment ‣ 3. Investment ‣ Lecture VII 12/11/2024 ‣ Lecture notes: Discrete Time Finance (MATH5320M)" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.1</span></a> one has to find a finite number of measures
<math id="S4.SS1.p3.m10" class="ltx_Math" alttext="\mathbb{Q}_{j}" display="inline"><semantics><msub><mi>ℚ</mi><mi>j</mi></msub><annotation encoding="application/x-tex">\mathbb{Q}_{j}</annotation></semantics></math>, <math id="S4.SS1.p3.m11" class="ltx_Math" alttext="j=1,\ldots,J" display="inline"><semantics><mrow><mi>j</mi><mo>=</mo><mrow><mn>1</mn><mo>,</mo><mi mathvariant="normal">…</mi><mo>,</mo><mi>J</mi></mrow></mrow><annotation encoding="application/x-tex">j=1,\ldots,J</annotation></semantics></math>, which generate the feasible set of
wealths by</p>
<div id="S4.SS1.Ex7" class="ltx_equation ltx_eqn_div">
<span><math id="S4.SS1.Ex7.m1" class="ltx_Math" alttext="\mathbb{E}_{\mathbb{Q}_{j}}\frac{W}{B_{T}}=x,\qquad j=1,\ldots,J." display="block"><semantics><mrow><mrow><mrow><mrow><msub><mi>𝔼</mi><msub><mi>ℚ</mi><mi>j</mi></msub></msub><mo>⁢</mo><mfrac><mi>W</mi><msub><mi>B</mi><mi>T</mi></msub></mfrac></mrow><mo>=</mo><mi>x</mi></mrow><mo rspace="2.357em">,</mo><mrow><mi>j</mi><mo>=</mo><mrow><mn>1</mn><mo>,</mo><mi mathvariant="normal">…</mi><mo>,</mo><mi>J</mi></mrow></mrow></mrow><mo lspace="0em">.</mo></mrow><annotation encoding="application/x-tex">\mathbb{E}_{\mathbb{Q}_{j}}\frac{W}{B_{T}}=x,\qquad j=1,\ldots,J.</annotation></semantics></math></span>
</div>
</div>
<div id="S4.SS1.p4" class="ltx_para">
<p class="ltx_p">Next to these two methods, which are basically the same as in the
single period market case, there is a third method to solve the
optimal portfolio problem in a multi period market model. This
method however does not work for itself, but depends on a technique
to solve the optimal portfolio problem for a single period model,
which could be either of the two techniques above. This new
technique is called the <span class="ltx_text ltx_font_bold">dynamic programming principle</span>. Its
real strength will be particularly well visible in the continuous
time framework, where the dynamic programming technique is used to
set up a partial differential equation, which is used to compute a
solution of the optimal portfolio problem by means of standard
methods from partial differential equations.</p>
</div>
<div id="S4.SS1.p5" class="ltx_para">
<p class="ltx_p">In the discrete time framework the dynamic programming principle can
be formulated as follows: denote with <math id="S4.SS1.p5.m1" class="ltx_Math" alttext="U_{t}(x)" display="inline"><semantics><mrow><msub><mi>U</mi><mi>t</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">U_{t}(x)</annotation></semantics></math> the optimal expected
utility from terminal wealth, which can be achieved, if the wealth
at time <math id="S4.SS1.p5.m2" class="ltx_Math" alttext="t" display="inline"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math> were equal to <math id="S4.SS1.p5.m3" class="ltx_Math" alttext="x" display="inline"><semantics><mi>x</mi><annotation encoding="application/x-tex">x</annotation></semantics></math>, i.e.</p>
<div id="S4.SS1.Ex8" class="ltx_equation ltx_eqn_div">
<span><math id="S4.SS1.Ex8.m1" class="ltx_Math" alttext="U_{t}(x)=\max\Big{\{}\mathbb{E}\big{(}u(V_{T}(\phi))\big{)}:\phi\in\mathcal{T}%
\mbox{ and }V_{t}(\phi)=x\Big{\}}." display="block"><semantics><mrow><mrow><mrow><msub><mi>U</mi><mi>t</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mrow><mi>max</mi><mo>⁡</mo><mrow><mo maxsize="160%" minsize="160%">{</mo><mrow><mrow><mi>𝔼</mi><mo>⁢</mo><mrow><mo maxsize="120%" minsize="120%">(</mo><mrow><mi>u</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><msub><mi>V</mi><mi>T</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>ϕ</mi><mo stretchy="false">)</mo></mrow></mrow><mo stretchy="false">)</mo></mrow></mrow><mo maxsize="120%" minsize="120%" rspace="0.278em">)</mo></mrow></mrow><mo rspace="0.278em">:</mo><mrow><mi>ϕ</mi><mo>∈</mo><mrow><mi class="ltx_font_mathcaligraphic">𝒯</mi><mo>⁢</mo><mtext> and </mtext><mo>⁢</mo><msub><mi>V</mi><mi>t</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>ϕ</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mi>x</mi></mrow></mrow><mo maxsize="160%" minsize="160%">}</mo></mrow></mrow></mrow><mo lspace="0em">.</mo></mrow><annotation encoding="application/x-tex">U_{t}(x)=\max\Big{\{}\mathbb{E}\big{(}u(V_{T}(\phi))\big{)}:\phi\in\mathcal{T}%
\mbox{ and }V_{t}(\phi)=x\Big{\}}.</annotation></semantics></math></span>
</div>
<p class="ltx_p">Clearly, the value <math id="S4.SS1.p5.m4" class="ltx_Math" alttext="U_{t}(x)" display="inline"><semantics><mrow><msub><mi>U</mi><mi>t</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">U_{t}(x)</annotation></semantics></math> does not depend on anything which
happened before time <math id="S4.SS1.p5.m5" class="ltx_Math" alttext="t" display="inline"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>, but only on the condition <math id="S4.SS1.p5.m6" class="ltx_Math" alttext="V_{t}(\phi)=x" display="inline"><semantics><mrow><mrow><msub><mi>V</mi><mi>t</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>ϕ</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">V_{t}(\phi)=x</annotation></semantics></math>.
The problem of computing <math id="S4.SS1.p5.m7" class="ltx_Math" alttext="U_{t}(x)" display="inline"><semantics><mrow><msub><mi>U</mi><mi>t</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">U_{t}(x)</annotation></semantics></math> is, in fact, an optimal portfolio
problem, which starts at time <math id="S4.SS1.p5.m8" class="ltx_Math" alttext="t" display="inline"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math> instead of time <math id="S4.SS1.p5.m9" class="ltx_Math" alttext="0" display="inline"><mn>0</mn></math>. <math id="S4.SS1.p5.m10" class="ltx_Math" alttext="U_{0}(x)" display="inline"><semantics><mrow><msub><mi>U</mi><mn>0</mn></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">U_{0}(x)</annotation></semantics></math> is
the value corresponding to our original problem and represents the
value we actually want to compute. We compute this value by going
backward from time <math id="S4.SS1.p5.m11" class="ltx_Math" alttext="t=T" display="inline"><semantics><mrow><mi>t</mi><mo>=</mo><mi>T</mi></mrow><annotation encoding="application/x-tex">t=T</annotation></semantics></math> to time <math id="S4.SS1.p5.m12" class="ltx_Math" alttext="t=0" display="inline"><semantics><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">t=0</annotation></semantics></math>. Clearly we have</p>
<div id="S4.SS1.Ex9" class="ltx_equation ltx_eqn_div">
<span><math id="S4.SS1.Ex9.m1" class="ltx_Math" alttext="U_{T}(x)=u(x)\mbox{ for all }x." display="block"><semantics><mrow><mrow><mrow><msub><mi>U</mi><mi>T</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mrow><mi>u</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mo>⁢</mo><mtext> for all </mtext><mo>⁢</mo><mi>x</mi></mrow></mrow><mo lspace="0em">.</mo></mrow><annotation encoding="application/x-tex">U_{T}(x)=u(x)\mbox{ for all }x.</annotation></semantics></math></span>
</div>
<p class="ltx_p">We now come to the point where the dynamic programming principle
comes into action. Assume we know the optimal value <math id="S4.SS1.p5.m13" class="ltx_Math" alttext="U_{t}(V_{t})" display="inline"><semantics><mrow><msub><mi>U</mi><mi>t</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>V</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">U_{t}(V_{t})</annotation></semantics></math> at
time <math id="S4.SS1.p5.m14" class="ltx_Math" alttext="t" display="inline"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math> for all wealth levels <math id="S4.SS1.p5.m15" class="ltx_Math" alttext="V_{t}" display="inline"><semantics><msub><mi>V</mi><mi>t</mi></msub><annotation encoding="application/x-tex">V_{t}</annotation></semantics></math> at time <math id="S4.SS1.p5.m16" class="ltx_Math" alttext="t" display="inline"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>, and we know the
corresponding trading strategies leading to these optimal values.
These trading strategies obviously depend on <math id="S4.SS1.p5.m17" class="ltx_Math" alttext="V_{t}" display="inline"><semantics><msub><mi>V</mi><mi>t</mi></msub><annotation encoding="application/x-tex">V_{t}</annotation></semantics></math>, but nevertheless
we know precisely how to optimally invest money in the market given
that the wealth at time <math id="S4.SS1.p5.m18" class="ltx_Math" alttext="t" display="inline"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math> is <math id="S4.SS1.p5.m19" class="ltx_Math" alttext="V_{t}" display="inline"><semantics><msub><mi>V</mi><mi>t</mi></msub><annotation encoding="application/x-tex">V_{t}</annotation></semantics></math>. How about our investment at
time <math id="S4.SS1.p5.m20" class="ltx_Math" alttext="t-1" display="inline"><semantics><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">t-1</annotation></semantics></math>? These investments, starting with a wealth <math id="S4.SS1.p5.m21" class="ltx_Math" alttext="V_{t-1}" display="inline"><semantics><msub><mi>V</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><annotation encoding="application/x-tex">V_{t-1}</annotation></semantics></math> then
necessarily lead to some wealth <math id="S4.SS1.p5.m22" class="ltx_Math" alttext="V_{t}" display="inline"><semantics><msub><mi>V</mi><mi>t</mi></msub><annotation encoding="application/x-tex">V_{t}</annotation></semantics></math> at time <math id="S4.SS1.p5.m23" class="ltx_Math" alttext="t" display="inline"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math> and we would
therefore be foolish, not to combine these investments with the
optimal trading strategy starting at time <math id="S4.SS1.p5.m24" class="ltx_Math" alttext="t" display="inline"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math> with the same <math id="S4.SS1.p5.m25" class="ltx_Math" alttext="V_{t}" display="inline"><semantics><msub><mi>V</mi><mi>t</mi></msub><annotation encoding="application/x-tex">V_{t}</annotation></semantics></math> as
its wealth. The step from <math id="S4.SS1.p5.m26" class="ltx_Math" alttext="t-1" display="inline"><semantics><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">t-1</annotation></semantics></math> to <math id="S4.SS1.p5.m27" class="ltx_Math" alttext="t" display="inline"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math> is in fact nothing else than
a single period model. Using the self financing condition, the
wealth at time <math id="S4.SS1.p5.m28" class="ltx_Math" alttext="t" display="inline"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math> induced by an investment <math id="S4.SS1.p5.m29" class="ltx_Math" alttext="\phi_{t-1}" display="inline"><semantics><msub><mi>ϕ</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><annotation encoding="application/x-tex">\phi_{t-1}</annotation></semantics></math>
corresponding to wealth <math id="S4.SS1.p5.m30" class="ltx_Math" alttext="V_{t-1}" display="inline"><semantics><msub><mi>V</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><annotation encoding="application/x-tex">V_{t-1}</annotation></semantics></math> at time <math id="S4.SS1.p5.m31" class="ltx_Math" alttext="t-1" display="inline"><semantics><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">t-1</annotation></semantics></math> is given by</p>
<div class="bml-overflow-wrapper">
<table id="S4.EGx51" class="ltx_equationgroup ltx_eqn_eqnarray ltx_eqn_table">

<tbody id="S4.SS1.Ex11">
<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S4.SS1.Ex10.m1" class="ltx_Math" alttext="\displaystyle V_{t}" display="inline"><semantics><msub><mi>V</mi><mi>t</mi></msub><annotation encoding="application/x-tex">\displaystyle V_{t}</annotation></semantics></math></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell"><math id="S4.SS1.Ex10.m2" class="ltx_Math" alttext="\displaystyle=" display="inline"><semantics><mo>=</mo><annotation encoding="application/x-tex">\displaystyle=</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S4.SS1.Ex10.m3" class="ltx_Math" alttext="\displaystyle\left(V_{t-1}-\sum_{i=1}^{n}\phi_{t-1}^{i}S_{t-1}^{i}\right)(1+r)%
+\sum_{i=1}^{n}\phi_{t-1}^{i}S_{t}^{i}" display="inline"><semantics><mrow><mrow><mrow><mo>(</mo><mrow><msub><mi>V</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>−</mo><mrow><mstyle displaystyle="true"><munderover><mo movablelimits="false">∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover></mstyle><mrow><msubsup><mi>ϕ</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow><mi>i</mi></msubsup><mo>⁢</mo><msubsup><mi>S</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow><mi>i</mi></msubsup></mrow></mrow></mrow><mo>)</mo></mrow><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mn>1</mn><mo>+</mo><mi>r</mi></mrow><mo stretchy="false">)</mo></mrow></mrow><mo>+</mo><mrow><mstyle displaystyle="true"><munderover><mo movablelimits="false">∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover></mstyle><mrow><msubsup><mi>ϕ</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow><mi>i</mi></msubsup><mo>⁢</mo><msubsup><mi>S</mi><mi>t</mi><mi>i</mi></msubsup></mrow></mrow></mrow><annotation encoding="application/x-tex">\displaystyle\left(V_{t-1}-\sum_{i=1}^{n}\phi_{t-1}^{i}S_{t-1}^{i}\right)(1+r)%
+\sum_{i=1}^{n}\phi_{t-1}^{i}S_{t}^{i}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
<tr class="ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell"><math id="S4.SS1.Ex11.m1" class="ltx_Math" alttext="\displaystyle=" display="inline"><semantics><mo>=</mo><annotation encoding="application/x-tex">\displaystyle=</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S4.SS1.Ex11.m2" class="ltx_Math" alttext="\displaystyle V_{t-1}(1+r)+\sum_{i=1}^{n}\phi_{t-1}^{i}\Delta S_{t}^{i}" display="inline"><semantics><mrow><mrow><msub><mi>V</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mn>1</mn><mo>+</mo><mi>r</mi></mrow><mo stretchy="false">)</mo></mrow></mrow><mo>+</mo><mrow><mstyle displaystyle="true"><munderover><mo movablelimits="false">∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover></mstyle><mrow><msubsup><mi>ϕ</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow><mi>i</mi></msubsup><mo>⁢</mo><mi mathvariant="normal">Δ</mi><mo>⁢</mo><msubsup><mi>S</mi><mi>t</mi><mi>i</mi></msubsup></mrow></mrow></mrow><annotation encoding="application/x-tex">\displaystyle V_{t-1}(1+r)+\sum_{i=1}^{n}\phi_{t-1}^{i}\Delta S_{t}^{i}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</tbody>
</table>
</div>
<p class="ltx_p">We should therefore choose our investment <math id="S4.SS1.p5.m32" class="ltx_Math" alttext="\phi_{t-1}" display="inline"><semantics><msub><mi>ϕ</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><annotation encoding="application/x-tex">\phi_{t-1}</annotation></semantics></math> at time <math id="S4.SS1.p5.m33" class="ltx_Math" alttext="t-1" display="inline"><semantics><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">t-1</annotation></semantics></math>
in order to maximise the expected value of <math id="S4.SS1.p5.m34" class="ltx_Math" alttext="U_{t}(V_{t})" display="inline"><semantics><mrow><msub><mi>U</mi><mi>t</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>V</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">U_{t}(V_{t})</annotation></semantics></math>, and then
follow the optimal strategy from time <math id="S4.SS1.p5.m35" class="ltx_Math" alttext="t" display="inline"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math> starting with <math id="S4.SS1.p5.m36" class="ltx_Math" alttext="V_{t}" display="inline"><semantics><msub><mi>V</mi><mi>t</mi></msub><annotation encoding="application/x-tex">V_{t}</annotation></semantics></math>.
Mathematically this idea is expressed in the <span class="ltx_text ltx_font_bold">dynamic
programming functional equation</span>:</p>
</div>
<div id="S4.SS1.p6" class="ltx_para">
<div id="S4.SS1.Ex12" class="ltx_equation ltx_eqn_div">
<span><math id="S4.SS1.Ex12.m1" class="ltx_math_unparsed" alttext="\boxed{\displaystyle U_{t}(x)=\max_{\phi_{t}\in\mathcal{F}_{t}}\mathbb{E}\left%
(U_{t+1}\bigg{(}x(1+r)+\sum_{i=1}^{n}\phi_{t}^{i}\Delta S_{t+1}^{i}\bigg{)}%
\bigg{|}\mathcal{F}_{t}\right).}" display="block"><semantics><menclose notation="box"><mrow><msub><mi>U</mi><mi>t</mi></msub><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mo>=</mo><munder><mi>max</mi><mrow><msub><mi>ϕ</mi><mi>t</mi></msub><mo>∈</mo><msub><mi class="ltx_font_mathcaligraphic">ℱ</mi><mi>t</mi></msub></mrow></munder><mi>𝔼</mi><mrow><mo>(</mo><msub><mi>U</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mrow><mo maxsize="210%" minsize="210%">(</mo><mi>x</mi><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>r</mi><mo stretchy="false">)</mo></mrow><mo rspace="0.055em">+</mo><munderover><mo movablelimits="false">∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msubsup><mi>ϕ</mi><mi>t</mi><mi>i</mi></msubsup><mi mathvariant="normal">Δ</mi><msubsup><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>i</mi></msubsup><mo maxsize="210%" minsize="210%">)</mo></mrow><mo fence="false" maxsize="210%" minsize="210%" rspace="0.167em">|</mo><msub><mi class="ltx_font_mathcaligraphic">ℱ</mi><mi>t</mi></msub><mo>)</mo></mrow><mo lspace="0em">.</mo></mrow></menclose><annotation encoding="application/x-tex">\boxed{\displaystyle U_{t}(x)=\max_{\phi_{t}\in\mathcal{F}_{t}}\mathbb{E}\left%
(U_{t+1}\bigg{(}x(1+r)+\sum_{i=1}^{n}\phi_{t}^{i}\Delta S_{t+1}^{i}\bigg{)}%
\bigg{|}\mathcal{F}_{t}\right).}</annotation></semantics></math></span>
</div>
</div>
<div id="S4.SS1.p7" class="ltx_para">
<p class="ltx_p">Here <math id="S4.SS1.p7.m1" class="ltx_Math" alttext="\phi_{t}\in\mathcal{F}_{t}" display="inline"><semantics><mrow><msub><mi>ϕ</mi><mi>t</mi></msub><mo>∈</mo><msub><mi class="ltx_font_mathcaligraphic">ℱ</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\phi_{t}\in\mathcal{F}_{t}</annotation></semantics></math> refers to the condition that the
<math id="S4.SS1.p7.m2" class="ltx_Math" alttext="\phi_{t}" display="inline"><semantics><msub><mi>ϕ</mi><mi>t</mi></msub><annotation encoding="application/x-tex">\phi_{t}</annotation></semantics></math> as an investment choice at time <math id="S4.SS1.p7.m3" class="ltx_Math" alttext="t" display="inline"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math> must be <math id="S4.SS1.p7.m4" class="ltx_Math" alttext="\mathcal{F}_{t}" display="inline"><semantics><msub><mi class="ltx_font_mathcaligraphic">ℱ</mi><mi>t</mi></msub><annotation encoding="application/x-tex">\mathcal{F}_{t}</annotation></semantics></math>
measurable. As already indicated the functional programming equation
can now be used to compute the value <math id="S4.SS1.p7.m5" class="ltx_Math" alttext="U_{0}(x)" display="inline"><semantics><mrow><msub><mi>U</mi><mn>0</mn></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">U_{0}(x)</annotation></semantics></math> backwards starting
from <math id="S4.SS1.p7.m6" class="ltx_Math" alttext="U_{T}(x)=u(x)" display="inline"><semantics><mrow><mrow><msub><mi>U</mi><mi>T</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mrow><mi>u</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow></mrow><annotation encoding="application/x-tex">U_{T}(x)=u(x)</annotation></semantics></math>, where in each step <math id="S4.SS1.p7.m7" class="ltx_Math" alttext="t\mapsto t-1" display="inline"><semantics><mrow><mi>t</mi><mo stretchy="false">↦</mo><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></mrow><annotation encoding="application/x-tex">t\mapsto t-1</annotation></semantics></math> an optimal
portfolio problem in a single period market model has to be solved.</p>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
</div>
</div>
<a href="Pt10.html" class="navigation navigation-prev" aria-label="Previous page"><i class="fa fa-angle-left"></i></a><a href="Ptx2.html" class="navigation navigation-next" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
</div>
</div>
<script src="bookml/gitbook/js/app.min.js"></script>
<script src="bookml/gitbook/js/jquery.highlight.js"></script>
<script src="bookml/gitbook/js/plugin-search.js"></script>
<script src="bookml/gitbook/js/plugin-fontsettings.js"></script>
<script src="bookml/gitbook/js/plugin-bookdown.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script>
        MathJax = {
          startup: {
            ready() {
              // do not process equations disabled with \bmlDisableMathJax (code suggested by Davide P. Cervone)
              class bmlFindMathML extends MathJax._.input.mathml.FindMathML.FindMathML {
                processMath(set) {
                  const adaptor = this.adaptor;
                  for (const node of set.values()) {
                    if (adaptor.hasClass(node, 'bml_disable_mathjax')) {
                      set.delete(node);
                    }
                  }
                  return super.processMath(set);
                }
              }

              MathJax._.components.global.combineDefaults(MathJax.config, 'mml', {FindMathML: new bmlFindMathML()});

              MathJax.startup.defaultReady();

              // preproces MathML to make MathJax aware of certain LaTeXML and BookML additional info
              const mmlFilters = MathJax.startup.input[0].mmlFilters;

              // convert the LaTeXML calligraphic (chancery) annotation to a form MathJax understands
              // since the corresponding Unicode characters render as script (rounded)
              const script2latin = {
                '𝒜': 'A', 'ℬ': 'B', '𝒞': 'C', '𝒟': 'D', 'ℰ': 'E', 'ℱ': 'F', '𝒢': 'G',
                'ℋ': 'H', 'ℐ': 'I', '𝒥': 'J', '𝒦': 'K', 'ℒ': 'L', 'ℳ': 'M', '𝒩': 'N',
                '𝒪': 'O', '𝒫': 'P', '𝒬': 'Q', 'ℛ': 'R', '𝒮': 'S', '𝒯': 'T', '𝒰': 'U',
                '𝒱': 'V', '𝒲': 'W', '𝒳': 'X', '𝒴': 'Y', '𝒵': 'Z',
              };

              mmlFilters.add((args) => {
                for (const n of args.data.getElementsByClassName('ltx_font_mathcaligraphic')) {
                  n.classList.add('MJX-tex-calligraphic');
                  const letter = script2latin[n.textContent];
                  if (letter !== undefined) { n.textContent = letter; }
                }
              });

              // adjust characters based on Unicode variation sequences
              const replacements = {
                // MathJax renders the empty set as the U+FE00 variant, so the plain character needs adjusting
                '∅': { variant: 'variant' },
                // MathJax renders script characters in rounded style, which is fine for no variation and U+FE00
                '𝒜\xFE00': { text: 'A', variant: 'tex-calligraphic' },
                'ℬ\xFE00': { text: 'B', variant: 'tex-calligraphic' },
                '𝒞\xFE00': { text: 'C', variant: 'tex-calligraphic' },
                '𝒟\xFE00': { text: 'D', variant: 'tex-calligraphic' },
                'ℰ\xFE00': { text: 'E', variant: 'tex-calligraphic' },
                'ℱ\xFE00': { text: 'F', variant: 'tex-calligraphic' },
                '𝒢\xFE00': { text: 'G', variant: 'tex-calligraphic' },
                'ℋ\xFE00': { text: 'H', variant: 'tex-calligraphic' },
                'ℐ\xFE00': { text: 'I', variant: 'tex-calligraphic' },
                '𝒥\xFE00': { text: 'J', variant: 'tex-calligraphic' },
                '𝒦\xFE00': { text: 'K', variant: 'tex-calligraphic' },
                'ℒ\xFE00': { text: 'L', variant: 'tex-calligraphic' },
                'ℳ\xFE00': { text: 'M', variant: 'tex-calligraphic' },
                '𝒩\xFE00': { text: 'N', variant: 'tex-calligraphic' },
                '𝒪\xFE00': { text: 'O', variant: 'tex-calligraphic' },
                '𝒫\xFE00': { text: 'P', variant: 'tex-calligraphic' },
                '𝒬\xFE00': { text: 'Q', variant: 'tex-calligraphic' },
                'ℛ\xFE00': { text: 'R', variant: 'tex-calligraphic' },
                '𝒮\xFE00': { text: 'S', variant: 'tex-calligraphic' },
                '𝒯\xFE00': { text: 'T', variant: 'tex-calligraphic' },
                '𝒰\xFE00': { text: 'U', variant: 'tex-calligraphic' },
                '𝒱\xFE00': { text: 'V', variant: 'tex-calligraphic' },
                '𝒲\xFE00': { text: 'W', variant: 'tex-calligraphic' },
                '𝒳\xFE00': { text: 'X', variant: 'tex-calligraphic' },
                '𝒴\xFE00': { text: 'Y', variant: 'tex-calligraphic' },
                '𝒵\xFE00': { text: 'Z', variant: 'tex-calligraphic' }
              };

              mmlFilters.add((args) => {
                let nodes = document.evaluate('.//m:mi | .//m:mn | .//m:mo | .//m:ms', args.data,
                  () => 'http://www.w3.org/1998/Math/MathML', XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE);
                for (let i = 0; i < nodes.snapshotLength; i++) {
                  const n = nodes.snapshotItem(i);
                  const repl = replacements[n.innerHTML];
                  if (repl !== undefined) {
                    const variant = repl['variant'];
                    const text = repl['text'];
                    if (variant !== undefined) { n.classList.add('MJX-' + variant); n.removeAttribute('mathvariant'); }
                    if (text !== undefined) { n.innerHTML = text; }
                  }
                }
              });
            }
          }
        };
      </script>
<script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/mml-chtml.js"></script>
<script type="text/javascript">
                gitbook.require(["gitbook"], function(gitbook) {
                gitbook.start({
                  "fontsettings": {
                    "theme": "white",
                    "family": "sans",
                    "size": 2
                  },
                  "download": [ [ "DiscreteTimeFinance.pdf", "PDF (serif)" ], [ "DiscreteTimeFinance-sans.pdf", "PDF (sans serif)" ], [ "DiscreteTimeFinance-sans-large.pdf", "PDF (sans serif, large)" ], ],
                  "search": {
                    "engine": "fuse"
                  },
                  "toc": {
                    "collapse": "none"
                  }
                });
              });
            </script>
</body>

</html>
